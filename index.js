const allWords = [
"taxík","ópium","zlato","hmota","rugby","hukot","astma","hobby","zľava","heslo","núdza","jedlo","efekt","nábor","hltan","imidž","kôlňa","obnos","osika","hliva","hudba","črevo","šakal","palma","režim","tehla","islam","gejša","kočiš","behúň","priek","burka","žiara","aféra","fyzik","mažár","kozub","kolos","tramp","oliva","horák","volej","žabka","boršč","bubon","kocúr","rydlo","motor","šabľa","dukát","sluha","klíma","výrez","guráž","sekta","čnosť","kefír","anión","drevo","aziat","bronz","rahno","grant","husle","záber","činka","blana","lupeň","komik","stret","ústav","dátum","barel","temno","pomoc","kútik","zamat","čajka","sumec","pažba","vozeň","úchop","trúba","hruda","výdaj","kázeň","bodík","hľuza","zlotý","finiš","madam","moped","náraz","zákal","ampér","zúbok","labka","dekór","afekt","oblak","likér","nerez","branč","bujón","korok","archa","lesba","lebka","šmrnc","olovo","foťák","zdroj","dojem","dohra","morka","zvada","návod","svišť","závrt","ebola","štvrť","rúčka","počin","vstup","baník","výboj","účasť","struk","odboj","námet","chlór","plech","légia","zápas","stádo","kačka","cícer","náhon","tresk","mrzák","senát","čepeľ","siaha","vdova","šípka","maród","ikona","sopka","vydaj","suita","panel","žľaza","báger","stuha","ošiaľ","zeleň","orava","rúcho","náter","béčko","sánka","výťah","kotúč","sluka","chren","vetva","oblet","salón","odlet","dúšok","návrh","mešec","posed","zvesť","labuť","areál","živel","kraul","prvák","vážka","džbán","neter","volič","motel","slama","zápor","pleva","kotol","pitie","vršič","obeta","hroch","margo","plášť","oblek","menič","sluch","zošit","album","mesto","baráž","dubák","vývin","losos","dosah","výter","hlava","úkryt","deľba","obdiv","tabak","sekáč","fúzia","náruč","bicie","pavúk","aréna","rabín","haluz","brloh","pľúca","závan","náplň","mater","ťažba","tútor","fotel","žetón","princ","rukáv","lajno","tulák","bašta","palác","výrub","nemka","bongo","panda","závod","mrcha","žumpa","mláďa","vnúča","posyp","učivo","krhla","lupič","čižma","vojna","zafír","chili","tumor","koreň","lampa","céčka","komár","pokrm","liter","vnada","voľba","mreža","párik","súhrn","blesk","libra","úplet","tovar","strih","výmer","fauna","barla","tiger","vtáča","výuka","blcha","džudo","áčkar","krimi","špurt","mrkva","kočka","dôkaz","srnie","výdrž","horor","zinok","mních","vzlyk","batoh","modem","roháč","kiosk","šuška","línia","regál","larva","zmena","obrys","blues","škoda","nanuk","bičík","rybka","lepok","rubeľ","perie","boxer","fiala","vývoj","derby","filet","blaho","agama","úžera","cynik","bieda","počet","kánon","humno","peceň","jazyk","myseľ","rakva","väzeň","sídlo","metal","repík","hrôza","miska","lekno","hôrka","figeľ","vazal","sypač","balón","hlina","koláč","bedľa","piano","majer","výbeh","debut","právo","sauna","díler","ražeň","voľno","vedec","zápal","tubus","žemľa","brada","rypák","limit","homár","ticho","trdlo","bôrik","radca","záhyb","nával","mixér","odber","intel","istič","skalp","pivár","sezam","varič","výnos","konto","céder","známy","krédo","pásik","obrus","odsek","osúch","čudák","vlaha","pýcha","opera","prsia","ponik","líška","tesák","súbeh","pasáž","scéna","sobol","gáfor","nádej","aróma","chata","facka","výpek","bralo","vrták","odraz","pomer","vlasť","kobra","lavór","závet","pupok","zajac","dovoz","autor","remeň","notár","ľalia","brest","pixel","razia","srieň","pohár","guláš","ľuľok","cibík","talón","pohan","splav","výpad","zenit","čapík","zmija","fetiš","slnko","kanón","chaos","bahno","zlosť","vozík","víťaz","tlkot","lotos","pudlo","hudec","odvod","tábor","fixka","kobka","psota","nárek","rádio","smršť","avízo","audio","bodák","plebs","zámka","mucha","adept","mýtus","jahňa","pätka","lakeť","revír","inter","decko","včela","kolík","dopis","pleso","nálet","výkaz","müsli","válov","rolák","kurín","lezec","panva","dedko","darca","ekzém","vizáž","rasca","pirát","dlaha","výčap","ušiak","devín","tempo","jeleň","kniha","ponor","toast","nosič","burza","maslo","herec","šelma","závit","arena","väzba","husár","sklad","motúz","obrat","rušeň","názov","diéta","mydlo","aorta","salto","letec","sonet","kupec","byvol","výkyv","vinár","slipy","genóm","mačka","anjel","fóbia","mudrc","sklár","mazúr","obava","plást","záhon","dolár","nápor","trova","žaluď","pagáč","matka","reťaz","sudca","urbár","kadet","fúrik","rusín","žilka","atlas","smska","kozol","srnec","čipka","manéž","mušľa","srnka","poker","sánky","hasič","drieň","kamoš","šofér","ďasno","žŕdka","kupón","nálev","šírka","výtlk","národ","bobor","oblok","češka","vplyv","tunel","otras","krtko","dráha","fréza","april","kúdol","koral","kajak","závej","trend","búrka","mamut","stoik","výkrm","selén","delta","názor","lámač","dopyt","vjazd","busta","vloha","občan","pokyn","obraz","egreš","terén","lepra","pošta","palec","rieka","odpis","dolet","retro","kolok","cumeľ","pohyb","obzor","popol","srdce","norma","klada","výraz","zásah","kvóta","zákop","obrad","bábka","tlmič","fajka","ohlas","šperk","viera","smrad","mlieč","sojka","hotel","anóda","ragby","výsek","kefka","nemoc","talár","citát","čadič","škára","žitie","buľva","kšeft","domov","bodka","akcia","breza","sodík","piroh","pôvab","opora","prvok","dávka","výrok","kýbeľ","kosák","cukor","telka","orech","štóla","otlak","latka","ťahač","javor","šuhaj","medza","šatka","potok","minca","orgán","prova","kaluž","chlad","chlap","vilma","bután","žĺtok","rôčik","ôsmak","štich","líder","blbec","smena","frmol","útvar","škola","nábeh","obväz","jeseň","réžia","vzdor","perón","bomba","hájik","dôraz","index","koláž","dedič","svrab","holič","kotúľ","lokál","topoľ","fenka","móres","padák","vývod","zadák","špára","žolík","bôžik","šička","vidly","hvizd","otvor","pilot","slasť","drozd","dotyk","slovo","štart","škrob","nákyp","prach","korzo","mekka","vojak","hanba","vpich","démon","murár","coupé","mobil","odvoz","okraj","helma","lesík","laser","rybár","pytón","držka","front","krása","gesto","spona","axióm","muška","hĺbka","rozum","výplň","sláva","loďka","vrhač","šport","etika","kapsa","cnosť","sukňa","drdol","výhra","črpák","kľuka","pocit","bonus","zubáč","mágia","marža","nárez","pečať","opuch","mafia","úvaha","vklad","páska","rováš","hymna","firma","herňa","luxus","výzor","sloha","zával","nález","klišé","riasa","iskra","beťár","stoka","téčko","jamka","šepot","plast","chúďa","šéfka","borák","okruh","psíča","odbyt","cveng","rifle","šťuka","garde","betón","láska","látka","krava","repka","sirup","obvod","rupia","arzén","sučka","chrup","vodič","únava","tlama","pumpa","kanoe","burič","karát","modul","pasta","písmo","rebel","náboj","šitie","kahan","túžba","zhoda","spása","rival","sykot","smola","kŕčok","malér","úroda","gamba","panák","tuleň","bytie","vývar","hurón","forma","sedan","konár","panic","sršeň","párok","rajón","koník","vajce","totem","lopta","hovor","lobby","tyčka","koľaj","kováč","kopec","barón","skala","korba","myška","mínus","funus","humus","odpor","kufor","katar","sáčok","kočík","čiara","posun","múrik","fjord","atlét","revue","zvrat","tácka","špica","kyjak","ródeo","korfu","košík","posol","kečup","ohľad","toxín","etapa","búdka","dereš","hrdza","sitko","vesna","toner","rôsol","úskok","nitka","idyla","parák","cieva","junák","pytač","šaman","jazva","vagón","odpad","mánia","bazár","argón","chvat","káder","kríza","ideál","cesto","vodák","kameň","aneta","vývoz","zákaz","myrha","hárem","vláda","bidet","vzlet","závin","sopeľ","holub","povel","kryha","zadok","výbor","puška","cifra","náuka","bidlo","epika","súkno","nános","život","bázeň","hrach","odbor","mango","vchod","práca","šarža","tetka","fráza","nádor","séria","záver","popud","galón","vízia","násyp","sféra","kulma","magma","dohad","obrna","pôvod","vyhňa","záliv","drvič","teror","rezeň","rúrka","tiket","piest","poník","banka","sonda","hašiš","šerpa","agent","rotor","stisk","uhlík","doska","kópia","pojem","rodák","mamba","bozón","torzo","kúsok","kurča","sumár","zrada","jasot","popis","koala","sebec","komín","hárok","bitka","rampa","jedľa","úsvit","oktán","video","odnož","osoba","lekár","hádka","dráma","bežec","súčet","fuška","sadza","vráta","karma","bydlo","vedro","cysta","motív","vejár","dozor","súťaž","zosuv","výpis","zámer","sviňa","kôpor","osada","divák","gajdy","balík","nákup","trhák","taška","misia","eidam","ryska","ľavák","pôrod","snaha","pečeň","tepna","kúpeľ","náves","spúšť","koráb","masív","nomád","babka","dióda","úklon","slina","kubík","okres","titán","sedlo","patyk","lávka","lotor","samec","saldo","odhad","apríl","porub","román","oblúk","vyžla","chyža","valec","ústup","debet","kužeľ","fakľa","bájka","hrčka","múčka","dusík","osteň","pásmo","opona","pekáč","mamka","sedma","liana","vodár","alarm","pápež","nápad","tenor","šálka","pšeno","výkup","kacír","číňan","danub","skica","žezlo","necht","tikot","manko","dinár","ortuť","výfuk","elita","pútač","vydra","panna","modus","tŕnie","paľba","zrnko","objav","civil","maďar","úžina","rébus","lúmen","ňufák","farma","madlo","súlož","sépia","reuma","stroj","vodka","slang","mozog","dvere","vanád","bedňa","socha","rebro","akryl","dražé","pokus","peklo","odvar","turné","halda","rubín","zárez","súbor","pátos","dĺžeň","ženáč","pasák","brejk","výber","hyena","fotka","zhluk","soška","odmäk","odsun","rehot","zásyp","nápoj","orbit","sklon","hubka","satén","samba","nájom","chrám","kasta","sexta","nožík","zápis","ofina","borec","audit","opica","otrok","kabát","káčer","baran","salva","ďateľ","kuvik","kosec","sibír","várka","bôčik","vdych","náčrt","harfa","alibi","závoj","oltár","prdel","syseľ","imelo","celok","šoška","dopad","baláž","zubor","fénix","rúško","fotón","nápis","oštep","farár","sadra","šibač","žalár","záves","vokál","výjav","čakan","celta","droga","rínok","dcéra","trnka","vzťah","šupka","výmaz","traka","sufix","banán","rímsa","maska","lejak","opiát","klbko","jaseň","media","garda","čípok","výron","modla","barok","hydra","krysa","korán","druid","širák","exces","večer","dojča","kapor","úľava","vresk","sifón","nečas","korec","teplo","metro","západ","pauza","odliv","hrtan","hlien","číslo","finta","gyros","rámec","vznik","objem","kŕdeľ","hltač","pocta","brána","týfus","nymfa","koňak","výlev","oceán","kokos","súhra","zjazd","sútok","dobro","lokaj","fľaša","zámok","sigma","rojko","honba","úsmev","vrece","šifra","záťah","goral","ťapka","sprej","masáž","kutáč","kábel","višňa","výkon","skrat","súcit","sinka","kauza","vášeň","obsah","jasno","kríže","kôpka","diera","torta","cesta","kaňon","pobyt","krčma","pesto","pisár","spleť","maják","morča","chmeľ","šnúra","vesta","súboj","kódex","hrdlo","múmia","škála","kozľa","rodič","lokša","stráž","špina","forum","chyba","počty","party","žieňa","fúria","húska","nádrž","stred","verva","stena","sokol","rande","lúpež","bacil","nárok","pozor","kotva","blato","zbroj","tržba","špión","gazda","krčah","tavba","omega","fluór","drina","parte","dieťa","fešák","gulag","gumár","mozoľ","výpar","schod","pohon","trakt","motýľ","tromf","osivo","škrek","flóra","tátoš","guľka","zebra","kompa","akord","stres","žatva","riman","tarot","bunda","miera","karta","sused","krpec","skaut","výška","lýtko","jarok","bedro","naháč","masér","silák","rohož","pošva","lymfa","vodca","ohrev","maľba","garáž","boháč","zákon","cisár","pieta","výlet","bingo","kôrka","vinič","salaš","aktér","vŕšok","jasle","astát","zloba","púčik","farba","radar","flirt","výzva","šteňa","hrvoľ","marec","päťka","tanec","kasár","kohút","odťah","dotaz","horec","model","plece","stopa","bohém","enzým","email","úškrn","motto","banda","pijan","pláca","úmera","kebab","denár","tréma","šatňa","vatra","poťah","frank","viola","pizza","relax","jazda","vďaka","dupľa","púder","vrana","level","tesár","fólia","disco","líčko","telúr","šanca","výkal","nafta","pekár","ústie","fórum","šťava","zátka","párty","vízum","meter","vrkoč","astra","letka","krach","metla","opcia","odkaz","horár","šalát","strop","radón","banjo","titul","kanál","dogma","skaza","dôvod","oznam","sústo","próza","hrkot","cigáň","rožok","bazén","selce","akosť","šunka","zánik","driek","tango","clona","súčin","pamäť","spóra","latex","budík","zdvih","dekan","kakao","dupot","strom","rolka","pitva","ježko","obruč","céčko","kocka","kukla","excel","paroh","metán","páter","pokoj","zubár","skóre","zobák","rolba","merač","tenis","ulica","báseň","záťaž","zbraň","prasa","sobáš","vápno","stráň","humor","jogín","hrana","packa","súper","sever","bunka","plnka","sérum","trasa","šmuha","pazúr","zeler","lúčka","jedák","sushi","župan","ruina","návyk","kašeľ","súdok","odtok","klaun","linka","hokej","gágor","zeman","nemec","jadro","dielo","zdrap","perla","neduh","vodík","hriva","útlak","trest","lovec","hubár","kojot","šiška","vírus","penis","mašľa","aleja","leták","ťahák","tĺčik","čeľaď","pedál","brvno","robot","botox","chróm","pasca","nálož","tráva","smrek","renta","déčko","súpis","súvis","brzda","bufet","kúria","limba","bager","úloha","udica","balet","uhlie","somár","hánka","mláka","výkop","pílka","lišta","pádlo","hrmot","búrač","vánok","vrava","háčik","výtok","ulita","freón","lôžko","súlad","dláto","melón","lotto","výčin","sucho","foyer","rodeo","kúzlo","uzlík","žáner","sušič","dezén","dĺžka","porno","náčuv","idióm","šôpka","butik","živec","bridž","galop","belák","roľka","džber","fakír","ihlan","vlhko","šrafa","paloš","metér","jatka","hámor","béčka","sudba","kapec","sváko","balič","blysk","lajda","angín","bojar","kytka","piati","čajík","nácia","opíča","nóvum","topás","chasa","kazár","polom","šábes","tešla","lalot","bežka","otčim","hipík","belko","maces","kibic","obuch","logik","páčka","spara","šéfko","xylén","čatár","hrbáň","pivko","estét","prask","tučko","radok","strek","vačok","pižmo","žinka","abája","psica","tupec","mláto","posuv","splín","diéty","eolit","grunt","legát","váčik","váľok","trust","bočka","táraj","člnok","sujet","radža","zárub","šliam","traky","šípie","osvit","dýčka","kúdeľ","grman","pútko","buxus","trhač","kavka","ranka","závoz","fókus","čibuk","agens","hobra","metál","oknár","báčik","dojka","zápač","brčka","beluš","rigol","sazka","ockov","ofset","korma","šimeľ","šanta","octan","kumys","šelak","nekov","buket","trapy","držba","dunčo","šúľok","zátaž","tomáš","okaňa","agáva","byľka","močka","organ","frnda","pávik","záder","bedrá","lapaj","kŕčik","čemer","jurta","zajko","nylón","jarka","gumák","fenig","skunk","žabec","bukas","dinyl","zásek","hadik","kačín","retuš","rúbaň","bagáž","chmat","címer","okovy","sadík","záloh","guáno","nažka","velúr","vajda","lámka","krúpa","logať","mätež","bujak","jagot","nosáľ","silón","žnica","lipid","lápis","nikel","kapia","viťúz","lagan","odľud","fúzač","ritka","lyska","kólia","nylon","debil","hurma","mixáž","capko","omelo","šturm","zhryz","ťahúň","mazut","činel","žabča","ôstie","striž","kutňa","menáž","stóra","hoboj","nápev","zábal","mazna","rumba","pánča","kelím","fízel","habit","bodec","luhár","vikár","obrok","zákos","tatko","lanka","rubáš","krček","letún","pampa","výpon","psina","tlupa","sklep","misie","dorub","šúšie","kúpač","zefír","vezír","dueto","rikša","ústrk","dúžka","medík","papek","ohmat","kozák","bizón","dokár","volán","letok","jáger","hadík","úklad","fenol","myrta","lalok","cigán","skoba","ofera","decht","mečať","budič","silon","blúza","hrbáč","hrboľ","ladič","piket","ľadík","fuzáň","otava","orlík","rámik","ňadro","štrng","vývrt","jakot","papka","česáč","punkt","pavúz","pylón","tŕnik","solič","zrnce","odval","spraš","surma","potaš","rámus","ingot","nitár","cípik","zážih","veslo","čmára","jarmo","čapta","kalif","glosa","hálka","pínia","satyr","weber","kurka","triko","razba","bučok","gofra","fígeľ","jedno","býček","géčko","junec","lazík","pŕška","maras","odroň","povoz","vinea","lomka","nugát","rítus","keper","beláň","odkop","pusta","kriak","frkot","jarec","štiep","junta","trpák","putňa","crkot","nebce","jutro","pompa","cepík","dúška","sokel","srnča","bíreš","dohán","pahýľ","lazúr","úľuba","lišaj","kvart","smida","devón","baryt","zosun","aldol","pôdoj","pupeň","lapač","stvol","mitra","bivak","klika","spiež","epeda","sečka","tyran","holáň","oplan","šupák","kalus","beryl","bizam","poéma","gnóma","tucet","empír","lutna","futro","averz","hĺbič","žitko","cípok","teľce","borka","gibon","radlo","výdoj","jeden","botel","fošňa","vlnka","kavyľ","frkan","kŕmič","držky","beťah","karas","bubák","jodid","erika","sliva","fučka","tatra","cicka","debna","tonus","ester","medik","cárok","datľa","silúr","torba","peruť","tlapa","sýpka","aspik","chova","nôcka","biľag","ľudák","ženba","mulat","zmier","nôžka","šušeň","tablo","čížik","perko","ambit","lurex","nosík","murín","úpust","fuzáč","pľuha","špunt","joule","pinka","faloš","kosba","cipka","úkrok","menza","dingo","mútiť","sorta","bibas","soboľ","stoja","tapír","lemeš","vlnár","sádka","žúžoľ","habán","ráfik","čuvač","fujak","kurič","zefyr","voška","výrad","behák","ťapša","polka","pajác","kolár","fagan","butyl","japan","súsek","onuca","šášie","fúzik","bobok","dlaba","šaľba","zvoľa","jupka","terno","razič","truľo","líšťa","rudka","batik","štras","mrmot","anima","jedny","hrada","poeta","päták","jedoš","pokál","manna","fukso","anály","tonáž","výlov","búčik","kazak","gadžo","kujon","bitie","vztyk","nárys","máliť","pľušť","falda","vzpor","dumka","pivot","máčik","pamuk","pažiť","satan","trhan","egida","tranz","algol","rezák","húžva","dália","riava","rígeľ","živáň","lyrik","batát","hábky","tuzex","albín","macko","mýlka","ľanár","fufna","cedák","vrása","ránko","židák","nátoň","fánka","donna","výpal","tchor","behúľ","spust","škica","pniak","orkán","plnič","topor","lizák","ujček","ketón","sínus","šafeľ","xerox","fanta","dečka","diván","šľapa","notes","kreol","trtáč","úhona","binóm","vínko","žmurk","knuta","výsyp","keťas","molet","lieno","mužík","skyva","vĺčok","disko","hrúza","háveď","synak","návej","véčko","hnida","južan","waltz","hovno","ohník","rytec","parta","rároh","síran","slieň","hever","ohava","tácňa","vábec","gatky","šafár","mihot","krpáň","rušič","honor","dudok","dymák","lokňa","penka","domec","koráľ","achát","bórax","brdce","gánok","čufty","gumka","mohár","ricín","hadži","jelša","peleš","skusy","améba","kopáč","rubač","šubka","tokár","lapka","zámik","cieňa","rázga","prásk","poryv","kotiť","kúkoľ","argot","kapún","bahor","kečka","volky","doraz","edikt","alúry","makro","fušer","frčka","ramár","švola","kanva","pukot","pyrit","rapeľ","fagot","šibal","štiav","trias","gusto","lázok","ligot","vršok","gučka","barak","maser","rezok","vokáň","žízeň","déčka","vŕbie","falus","bedár","tajga","cecok","guľáš","cupot","spica","sipot","tiráž","klzák","dlapa","eocén","fikus","pipka","zrast","hádač","siheľ","výmoľ","bárka","medár","dácia","tárač","trkot","cínia","ocino","bojko","ráčik","kesón","pevec","drúza","váčok","šopka","štica","črvoč","fifík","opuka","rubár","mumák","filip","blkot","drkot","grand","simka","titan","alonž","hanza","sušeň","pitka","tibet","úvrať","orloj","kumšt","sonar","šerif","ornát","špata","tanín","dojič","etuda","háčko","šnaps","šišak","kožka","géčka","tarok","úšust","šálik","kojiť","míner","spray","švung","dipól","mumps","rokľa","misál","mrena","neger","atest","lanár","sadba","čereň","streh","vozič","siena","telex","ódium","gunár","vŕtač","sýtič","zádrh","fúkač","horda","datív","dežma","lelek","lomoz","tisíc","tužka","junač","mapka","záčin","cirok","lopár","kulak","pozér","gagot","nivea","berla","bedač","marka","flauš","nugat","sadlo","krvák","ľapot","honec","hertz","lepič","próba","šípik","vĺčik","holeň","vilka","divis","delič","ťapot","hobeľ","fixír","papáč","kasňa","polyp","marón","sejba","ovsík","siláž","sopľa","xenón","šidlo","varta","optik","krveľ","kýpeť","mohér","kónus","štuka","kepeň","mecén","strýc","zábeh","nečin","ľudia","popuk","ruman","dural","šarha","výžin","čačka","dieža","kokón","frfot","pijak","ledač","týmus","gazík","kader","solux","norka","kvark","tesil","varák","fikot","pašák","sivko","mimik","búčok","grupa","baťko","obtok","rapot","zosyp","dlháň","skruž","liace","rabat","poter","cinár","žaket","sosna","kalič","syrár","štiap","točka","bagún","lyzol","radič","tŕpka","zhuba","jalec","nosáň","ucháň","zátrh","orgie","fifik","bucko","tabla","šifón","hŕbik","šušot","sraľo","čárda","táčky","pohov","točňa","peháň","major","proso","plesk","slnce","avoár","pútec","dynka","kamea","fičúr","hurka","ťažeň","ožran","zaťko","kanec","odlev","rezba","baret","borba","fajta","sľuda","beľmo","dúbok","katan","smalt","štváč","kefár","vpust","šibák","trópy","kaška","grapa","tiara","dolka","obťah","škuta","obrva","twist","farad","zubáľ", "živio"
];

ACCENTED = { 'á': "a", 'ä': "a", 'é': "e", 'í': "i", 'ó': "o", 'ô': "o", 'ú': "u", 'ü': "u", 'ý': "y", 'č': "c", 'ď': "d", 'ĺ': "l", 'ľ': "l", 'ň': "n", 'ŕ': "r", 'š': "s", 'ť': "t", 'ž': "z" }
// number of words that can be answers
const GOOD_WORDS = 1624;

const MILLIS_IN_A_DAY = 1000 * 3600 * 24;

// persist across midnight; require page refresh
const today = new Date();

let currIdx = 0;
let cells;
let currWord = "";
let gameEnded = false;
let winWord;
let winWordAscii;
let allWordsAscii;

function getWinWord(date) {
  // easter eggs
  if (date.getYear() === 123 && date.getMonth() === 10 && date.getDate() === 24) {
    return "orech";
  }
  if (date.getYear() === 123 && date.getMonth() === 10 && date.getDate() === 25) {
    return "banán";
  }
  if (date.getYear() === 123 && date.getMonth() === 10 && date.getDate() === 26) {
    return "torta";
  }
  if (date.getYear() === 123 && date.getMonth() === 10 && date.getDate() === 27) {
    return "živio";
  }
    const dateUTC = new Date(Date.UTC(date.getYear() + 1900, date.getMonth(), date.getDate()));
    const firstDayUTC = new Date(2023, 0, 1);
    const daysSince = Math.floor((dateUTC - firstDayUTC) / MILLIS_IN_A_DAY);
    return allWords[daysSince % GOOD_WORDS];
}

function removeAccents(word) {
    return [...word].map(c => ACCENTED[c] ? ACCENTED[c] : c).join("");
}



function init() {
  winWord = getWinWord(today);
  winWordAscii = removeAccents(winWord);
  allWordsAscii = new Set(allWords.map(w => removeAccents(w)));
  cells = document.querySelectorAll('.cell');

  // setup keyboard
  document.addEventListener('keyup', (e) => onKeyPress(e.key));
  const keys = document.querySelectorAll('.key > div');
  for(const key of keys) {
    key.addEventListener('click', (e) => {
      const letter = e.target.innerText;
      if (letter === "DEL") onKeyPress('Backspace');
      else if (letter === "ENTER") onKeyPress('Enter');
      else onKeyPress(letter.toLowerCase());
    });
  }

  document.getElementById('copyGame').addEventListener('click', (e) => {
    const guesses = getStoredGame(today);
    const gameColors = guesses.map(guess => getColours(guess, winWordAscii).join(""));
    const score = guesses[guesses.length - 1] == winWordAscii ? guesses.length : guesses.length + 1;
    navigator.clipboard.writeText(`Slovo\n${score}/6\n${gameColors.join("\n")}`).then(() => {
      e.target.innerText = "Skopírované!";
      setTimeout(() => e.target.innerText = "Skopírovať", 2000);
    }).catch(() => {
      e.target.innerText = "Nedá sa";
      setTimeout(() => e.target.innerText = "Skopírovať", 2000);
    });
  });

  document.getElementById('historyButton').addEventListener('click', onHistoryButtonClicked);


  restoreGame();
}

function onKeyPress(letter) {
  const dialog = document.getElementById("endDialog");
  const historyDialog = document.getElementById("historyDialog");
  if (dialog.open || historyDialog.open) {
    return;
  }
  if (gameEnded) {
    if (letter === 'Enter') {
      onGameEnded();
    }
    return;
  }
  if (letter === 'Enter' && currWord.length === 5) {
    if (!isWord(currWord)) {
      return;
    }
    addWord(currWord, currIdx, true);
    storeWordToLocalStorage(currWord, today);
    cells[currIdx-1].parentElement.classList.remove('nonexistent');
    cells[currIdx-1].parentElement.classList.remove('existent');

    if (currWord === winWordAscii || currIdx === cells.length) {
      gameEnded = true;
      cells[currIdx-1].addEventListener('transitionend', onGameEnded);
      reportScore();
    } else {
      currWord = "";
      cells[currIdx].classList.add('cursor');
    }
  } else if (letter === 'Backspace' && currWord.length > 0) {
    if (currIdx < cells.length) {
      cells[currIdx].classList.remove('cursor')
    }
    currIdx -= 1;
    cells[currIdx].innerText = '';
    cells[currIdx].classList.add('cursor')
    cells[currIdx].parentElement.classList.remove('nonexistent');
    cells[currIdx].parentElement.classList.remove('existent');
    currWord = currWord.slice(0, -1);
  } else if ('a' <= letter && letter <= 'z' && currWord.length < 5) {
    cells[currIdx].classList.remove('cursor')
    cells[currIdx].innerText = letter;
    currWord += letter;
    currIdx += 1;

    if (currWord.length < 5) {
      cells[currIdx].classList.add('cursor')
    } else {
      cells[currIdx-1].parentElement.classList.add(
        isWord(currWord) ? 'existent' : 'nonexistent');
    }
  }
}

function isWord(word) {
  return allWordsAscii.has(word);
}

function addWord(word, currIdx, slowly) {
  const colours = getColours(word, winWordAscii);
  const changeKeyColors = [];

  for(let i = 0; i < word.length; i++) {
    const cell = cells[currIdx - word.length + i];
    cell.innerText = word[i];
    if (slowly) {
      cell.classList.add('animated');
    }
    if (colours[i] === GREEN) {
      cell.classList.add('good', 'position');
      const fn = () => cell.innerText = winWord[i];
      if (slowly) {
        cell.addEventListener('transitionstart', fn);
      } else {
        fn();
      }
      changeKeyColors.push(()=> getKeyboardKey(word[i]).classList.add("good", "position"));

    } else if (colours[i] === ORANGE) {
      cell.classList.add('good');
      changeKeyColors.push(()=> getKeyboardKey(word[i]).classList.add("good"));
    } else {
      cell.classList.add('bad');
      changeKeyColors.push(() => getKeyboardKey(word[i]).classList.add('bad'));
    }
  }

  // update keyboard keys
  if (slowly) {
    cells[currIdx-1].addEventListener('transitionend', () => changeKeyColors.forEach(fn => fn()));
  } else {
    changeKeyColors.forEach(fn => fn());
  }
}

const GREEN = "🟩";
const ORANGE = "🟨";
const GRAY = "⬛";
function getColours(word, winWordAscii) {
  const winLetters = new Map();
  for(let i = 0; i < winWordAscii.length; i++) {
    if (word[i] === winWordAscii[i]) {
      continue;
    }
    const count = winLetters.get(winWordAscii[i]);
    if (count === undefined) {
      winLetters.set(winWordAscii[i], 1);
    } else {
      winLetters.set(winWordAscii[i], count + 1);
    }
  }

  const colours = [];
  for(let i = 0; i < word.length; i++) {
    if (word[i] === winWordAscii[i]) {
      colours.push(GREEN);
    } else if (winLetters.get(word[i]) > 0) {
      colours.push(ORANGE);
      const count = winLetters.get(word[i]);
      winLetters.set(word[i], count - 1);
    } else {
      colours.push(GRAY);
    }
  }
  return colours;
}

function storeWordToLocalStorage(word, date) {
  const key = getDateKey(date);
  const guesses = JSON.parse(localStorage.getItem(key));
  guesses.push(word);
  localStorage.setItem(key, JSON.stringify(guesses));
}

function getKeyboardKey(letter) {
  return Array.from(document.querySelectorAll(".key > div")).find(e => e.innerHTML === letter);
}

function reportScore() {
  const guesses = getStoredGame(today);
  const score =
    guesses[guesses.length - 1] === winWordAscii
    ? guesses.length
    : guesses.length === 6 ? 7 : "-";
  if (window.goatcounter && window.goatcounter.count) {
    window.goatcounter.count({
      path:  `game-end/${getDateKey(today)}/${score}`,
      event: true,
    })
  }
}

function onGameEnded() {
  const dialog = document.getElementById("endDialog");
  if (dialog.open) {
    return;
  }
  const game = document.getElementById("game");
  game.innerHTML = '';
  const winWordElement = document.getElementById("winWord");
  winWordElement.innerText = winWord;
  dialog.showModal();
  const guesses = getStoredGame(today);
  for(const guess of guesses) {
    const colours = getColours(guess, winWordAscii);
    game.innerHTML += `<p>${colours.join("")}</p>`;
  }
}

function onHistoryButtonClicked() {
  const dialog = document.getElementById('historyDialog');
  const history = document.getElementById('history');
  history.innerHTML = "";
  const scores = [];

  for(let i = 6; i >= 0; i-=1) {
    const date = new Date(today);
    date.setDate(date.getDate() - i);
    const winWord = getWinWord(date);
    const winWordAscii = removeAccents(winWord);
    const guesses = getStoredGame(date);
    const score =
      guesses[guesses.length - 1] === winWordAscii
      ? guesses.length
      : guesses.length === 6 ? 7 : "-";
    if (score !== '-') {
      scores.push(score);
    }
    const displayWord = i !== 0 ? winWord : "???";

    history.innerHTML += `<span>${displayWord}</span><span>${score}</span>`;
  }

  const scoreAvg = scores.length == 0 ? "" : Number(scores.reduce((x,y) => x+y) / scores.length).toFixed(1);
  history.innerHTML += `<span>Priemer:</span><span>${scoreAvg}`;

  dialog.showModal();
}

function getDateKey(date) {
  return `${date.getDate()}-${date.getYear() + 1900}-${date.getMonth()+1}`;
}

function restoreGame() {
  const guesses = getStoredGame(today);
  if (guesses.length === 6 || guesses[guesses.length - 1] === winWordAscii) {
    gameEnded = true;
    document.body.classList.add("gameEnded");
    onGameEnded();
  }

  for(const guess of guesses) {
    currIdx += guess.length;
    addWord(guess, currIdx, false);
  }

  if (!gameEnded) {
    cells[currIdx].classList.add('cursor');
  }
}

function getStoredGame(date) {
  const key = getDateKey(date);
  let guesses = localStorage.getItem(key);
  if (guesses === null) {
    guesses = JSON.stringify([]);
    localStorage.setItem(key, guesses);
  }
  return JSON.parse(guesses);
}

